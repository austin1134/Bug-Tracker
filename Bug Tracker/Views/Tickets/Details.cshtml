@using Bug_Tracker.Models
@model Bug_Tracker.Models.Ticket

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="normalheader transition">
    <div class="hpanel">
        <div class="panel-body">
            <a class="small-header-action" href="">
                <div class="pull-right m-t-lg">
                        <button @*@Url.Action("Edit", "Tickets")*@ class="btn btn-default btn-xs"> <i class="fa fa-pencil fa-2x"></i> Edit</button>
                </div>
                    <div class="clip-header">
                        <i class="fa fa-arrow-up"></i>
                    </div>
</a>

            <div id="hbreadcrumb" class="pull-right m-t-lg">
                <ol class="hbreadcrumb breadcrumb">
                    <li><a href="index.html">Dashboard</a></li>
                    <li>
                        <span>Tables</span>
                    </li>
                    <li class="active">
                        <span>Ticket: @Model.Title</span>
                    </li>
                </ol>
            </div>
            <h1 class="font-light m-b-xs">
                Ticket Details For Ticket: @Model.Title
                <br/>
                <h4>Ticket Status:
                    @if (Model.TicketStatus == null)
                    {
                        <text>No Status Has Been Assigned Yet</text>
                    }
                    else if (Model.TicketStatus.Status == "In Progress")
                    {
                        <button class="btn btn-primary btn-sm"> In Progress</button>
                    }
                    else if (Model.TicketStatus.Status == "Resolved")
                    {
                        <button class="btn btn-success btn-sm"> Resolved</button>
                    }
                    <br/>
                    Ticket Priority:
                    @if (Model.TicketPriority == null)
                    {
                        <text>No Priority Has Been Assigned Yet</text>
                    }
                    else if (Model.TicketPriority.Priority == "Urgent")
                    {
                        <button class="btn btn-danger2 btn-sm"> Urgent</button>
                    }
                    else if (Model.TicketPriority.Priority == "Essential")
                    {
                        <button class="btn btn-warning2 btn-sm"> Essential</button>
                    }
                    else if (Model.TicketPriority.Priority == "Low")
                    {
                        <button class="btn btn-success btn-sm"> Low</button>
                    }
                    <br/>
                    Ticket Type:
                    @if (Model.TicketType == null)
                    {
                        <text>Ticket Type Hasn't Been Assigned Yet</text>
                    }
                    else
                    {
                        <button class="btn btn-info btn-sm">@Model.TicketType.Name</button>
                    }
                </h4>
            </h1>
            <h6>
                <strong>Created By:</strong>@Model.AuthorId 
                <strong>Creation Date:</strong>@Model.CreationDate
            </h6>
            @*<small>Special page for project detail.</small>*@
        </div>
    </div>
</div>

<div class="content animate-panel">

    <div class="row">

        <div class="col-md-7">

            <div class="font-bold m-b-sm">
                Ticket Details
            </div>

            <div class="hpanel">
                <div class="panel-body">

                    <div class="pull-right">
                        @*<button class="btn btn-success btn-xs">  Resolved</button>*@
                    </div>

                    <h4>Comments</h4>
                    <div class="m-t-md">
                        @Model.Attachments.FirstOrDefault()
                        @Html.Partial("_CommentsViewPartial", @Model.Comments)

                        @Html.Partial("_CreateCommentsPartial", new Comment {TicketId = Model.Id})
                        @*<canvas id="lineOptions" height="60"></canvas>*@
                    </div>
                </div>
            </div>

            <div class="hpanel">

                <div class="panel-body">

                <h4>Ticket History</h4>

                    <div class="table-responsive">
                        <table class="table table-hover table-bordered table-striped">
                            <tbody>
                                <tr>
                                    <td>
                                        <span class="label label-success">Added</span>
                                    </td>
                                    <td class="issue-info">
                                        <a href="#">
                                            Message
                                        </a>
                                        <br />
                                        <small>
                                            This is issue with the coresponding note
                                        </small>
                                    </td>
                                    <td>
                                        Adrian Novak
                                    </td>
                                    <td>
                                        12.02.2015
                                    </td>
                                    <td class="text-right">
                                        <button class="btn btn-default btn-xs"> Action</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="label label-info">Added</span>
                                    </td>
                                    <td class="issue-info">
                                        <a href="#">
                                            Call
                                        </a>
                                        <br />
                                        <small>
                                            Desktop publishing packages and web page editors now use Lorem Ipsum as their default model text
                                        </small>
                                    </td>
                                    <td>
                                        Anna Smith
                                    </td>
                                    <td>
                                        10.02.2015
                                    </td>
                                    <td class="text-right">
                                        <button class="btn btn-default btn-xs"> Action</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="label label-success">Added</span>
                                    </td>
                                    <td class="issue-info">
                                        <a href="#">
                                            Message
                                        </a>
                                        <br />
                                        <small>
                                            It is a long established fact that a reader will be
                                        </small>
                                    </td>
                                    <td>
                                        Anthony Jackson
                                    </td>
                                    <td>
                                        02.03.2015
                                    </td>
                                    <td class="text-right">
                                        <button class="btn btn-default btn-xs"> Action</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="label label-info">Added</span>
                                    </td>
                                    <td class="issue-info">
                                        <a href="#">
                                            Message
                                        </a>
                                        <br />
                                        <small>
                                            There are many variations of passages of Lorem Ipsum available, but the majority have suffered
                                        </small>
                                    </td>
                                    <td>
                                        Monica Proven
                                    </td>
                                    <td>
                                        01.10.2015
                                    </td>
                                    <td class="text-right">
                                        <button class="btn btn-default btn-xs"> Action</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="label label-info">Fixed</span>
                                    </td>
                                    <td class="issue-info">
                                        <a href="#">
                                            Meeting
                                        </a>
                                        <br />
                                        <small>
                                            Always free from repetition, injected humour, or non-characteristic words etc.
                                        </small>
                                    </td>
                                    <td>
                                        Alex Ferguson
                                    </td>
                                    <td>
                                        28.11.2015
                                    </td>
                                    <td class="text-right">
                                        <button class="btn btn-default btn-xs"> Action</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="label label-success">Fixed</span>
                                    </td>
                                    <td class="issue-info">
                                        <a href="#">
                                            Message
                                        </a>
                                        <br />
                                        <small>
                                            Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit am
                                        </small>
                                    </td>
                                    <td>
                                        Mark Conor
                                    </td>
                                    <td>
                                        18.09.2015
                                    </td>
                                    <td class="text-right">
                                        <button class="btn btn-default btn-xs"> Action</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="label label-success">Fixed</span>
                                    </td>
                                    <td class="issue-info">
                                        <a href="#">
                                            Call
                                        </a>
                                        <br />
                                        <small>
                                            Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit am
                                        </small>
                                    </td>
                                    <td>
                                        Carol Jackson
                                    </td>
                                    <td>
                                        11.03.2015
                                    </td>
                                    <td class="text-right">
                                        <button class="btn btn-default btn-xs"> Action</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="label label-success">Fixed</span>
                                    </td>
                                    <td class="issue-info">
                                        <a href="#">
                                            Message
                                        </a>
                                        <br />
                                        <small>
                                            Content here, content here', making it look like readable English. Many desktop
                                        </small>
                                    </td>
                                    <td>
                                        Carol Jackson
                                    </td>
                                    <td>
                                        05.04.2015
                                    </td>
                                    <td class="text-right">
                                        <button class="btn btn-default btn-xs"> Action</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="label label-info">Fixed</span>
                                    </td>
                                    <td class="issue-info">
                                        <a href="#">
                                            Meeting
                                        </a>
                                        <br />
                                        <small>
                                            Virginia, looked up one of the more obscure Latin words, consectetur
                                        </small>
                                    </td>
                                    <td>
                                        Monica Smith
                                    </td>
                                    <td>
                                        10.06.2014
                                    </td>
                                    <td class="text-right">
                                        <button class="btn btn-default btn-xs"> Action</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <span class="label label-success">Fixed</span>
                                    </td>
                                    <td class="issue-info">
                                        <a href="#">
                                            Meeting
                                        </a>
                                        <br />
                                        <small>
                                            Injected humour, or randomised words which don't l
                                        </small>
                                    </td>
                                    <td>
                                        Anna Johnson
                                    </td>
                                    <td>
                                        13.05.2014
                                    </td>
                                    <td class="text-right">
                                        <button class="btn btn-default btn-xs"> Action</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-md-5">
                                    @Html.Partial("_AssignDeveloperPartial")
                                    @Html.Partial("_AddTicketAttachmentPartial", new TicketAttachment { TicketId = Model.Id })
                                    
                </div>
            </div>
        </div>